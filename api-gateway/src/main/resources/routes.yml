gateway:
  versioning:
    enabled: true
    compatibility:
      matrix:
        v2:
          - v1
    mappings:
      - &tenant-versioning-base
        id: tenant-api
        description: Normalize legacy tenant endpoints to v2 implementations
        default-version: v2
        legacy-paths:
          - /v1/tenants/{*remaining}
          - /api/v1/tenants/{*remaining}
        routes:
          - version: v1
            target-version: v2
            rewrite-path: /v2/tenants/{remaining}
            weight: 90
            deprecated: true
            warning: "Tenant API v1 is deprecated and will be removed. Use Accept-Version: v2."
            sunset: 2024-12-31T00:00:00Z
            policy-link: https://docs.example.com/tenant-api-deprecation
            compatibility:
              - v1
              - v2
            additional-headers:
              X-Gateway-Track: primary
          - version: v1
            target-version: v2
            rewrite-path: /v2/tenants/{remaining}
            weight: 10
            deprecated: true
            warning: Tenant API v1 is being migrated to v2 rollout track.
            sunset: 2024-12-31T00:00:00Z
            documentation-group: tenant-api-v2-canary
            additional-headers:
              X-Gateway-Track: canary
          - version: v2
            rewrite-path: /v2/tenants/{remaining}
            weight: 100
            compatibility:
              - v2
            documentation-group: tenant-api-v2
  routes: {}
