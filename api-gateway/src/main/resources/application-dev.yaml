spring:
  main:
    lazy-initialization: true
  config:
    activate:
      on-profile: dev
  cloud:
    config:
      profile: dev
      label: develop
    loadbalancer:
      configurations: health-check
      health-check:
        refetch-instances: true
        interval: 5s
    kubernetes:
      enabled: true
      discovery:
        enabled: true
        all-namespaces: false
        primary-port-name: http
      reload:
        enabled: true
    discovery:
      client:
        simple:
          instances:
            setup-service:
              - uri: http://setup-service:8080
                instance-id: setup-service-dev
                metadata:
                  management.context-path: /core
            tenant-service:
              - uri: http://tenant-service:8080
                instance-id: tenant-service-dev
                metadata:
                  management.context-path: /tenant
            catalog-service:
              - uri: http://catalog-service:8080
                instance-id: catalog-service-dev
                metadata:
                  management.context-path: /catalog
            subscription-service:
              - uri: http://subscription-service:8080
                instance-id: subscription-service-dev
                metadata:
                  management.context-path: /subscription
            billing-service:
              - uri: http://billing-service:8080
                instance-id: billing-service-dev
                metadata:
                  management.context-path: /billing
            analytics-service:
              - uri: http://analytics-service:8080
                instance-id: analytics-service-dev
                metadata:
                  management.context-path: /
            security-service:
              - uri: http://security-service:8080
                instance-id: security-service-dev
                metadata:
                  management.context-path: /sec
    gateway:
      discovery:
        locator:
          enabled: true
          lower-case-service-id: true
  jpa:
    open-in-view: false
  sql:
    init:
      mode: always

gateway:
  webclient:
    connect-timeout: 3s
    response-timeout: 12s
    read-timeout: 12s
    write-timeout: 12s
  subscription:
    enabled: false
    cache-ttl: 2m
    validate-all-routes: false
    fail-open: true
  cache:
    enabled: false
    warm-on-startup: false
    warm-tenants: []
    routes: []
  defaults:
    resilience:
      retry:
        retries: 2
        backoff:
          first-backoff: 200ms
          max-backoff: 3s
          factor: 2.5

shared:
  ratelimit:
    capacity: 600
    window: 45s

app:
  env: dev

jasypt:
  encryptor:
    fail-on-missing-password: false

springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    enabled: true

logging:
  level:
    com.ejada.gateway: DEBUG
    org.springframework.cloud.gateway: DEBUG
    org.springframework.web.server: DEBUG
    reactor.netty: DEBUG

management:
  health:
    kubernetes:
      enabled: true
