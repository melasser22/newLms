server:
  port: 8082

spring:
  kafka:
    bootstrap-servers: localhost:29092
    consumer:
      group-id: ${KAFKA_CONSUMER_GROUP_ID:email-sending-service}
  data:
    redis:
      host: localhost
      port: 6379
  datasource:
    url: "${DB_URL:jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:ne}?currentSchema=email}"
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:postgres}
  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        format_sql: true
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration/common,classpath:db/migration/{vendor}

kafka:
  topics:
    email-send: email.send
    email-bulk: email.bulk
    dead-letter: email.dlq

rate-limit:
  capacity: 200
  refill-per-minute: 200

shared:
  security:
    mode: hs256
    hs256:
      secret: ${JWT_SECRET:7h1aH9UllV2E7Yka4P6s2F+1Vn6V5w9zIXhmJ5aB1kA=}
    tenant-claim: tenant
    resource-server:
      enabled: true
      permit-all:
        - /actuator/health
        - /v3/api-docs/**
        - /swagger-ui/**
  core:
    tenant:
      resolve-from-jwt: true
      prefer-header-over-jwt: false
